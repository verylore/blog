!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=[{key:"aries",ko:"양자리",ico:"♈",period:"3.21~4.19"},{key:"taurus",ko:"황소자리",ico:"♉",period:"4.20~5.20"},{key:"gemini",ko:"쌍둥이자리",ico:"♊",period:"5.21~6.21"},{key:"cancer",ko:"게자리",ico:"♋",period:"6.22~7.22"},{key:"leo",ko:"사자자리",ico:"♌",period:"7.23~8.22"},{key:"virgo",ko:"처녀자리",ico:"♍",period:"8.23~9.22"},{key:"libra",ko:"천칭자리",ico:"♎",period:"9.23~10.22"},{key:"scorpio",ko:"전갈자리",ico:"♏",period:"10.23~11.22"},{key:"sagittarius",ko:"사수자리",ico:"♐",period:"11.23~12.21"},{key:"capricorn",ko:"염소자리",ico:"♑",period:"12.22~1.19"},{key:"aquarius",ko:"물병자리",ico:"♒",period:"1.20~2.18"},{key:"pisces",ko:"물고기자리",ico:"♓",period:"2.19~3.20"}];let t={love:["마음의 여유가 대화를 부드럽게 만듭니다.","기대치보다 솔직함이 더 큰 힘을 발휘합니다.","우연한 메시지가 좋은 신호가 됩니다.","관심 표현은 작게, 그러나 분명하게.","그린라이트는 디테일에 숨어 있습니다."],work:["우선순위를 명확히 하면 속도가 붙습니다.","작은 성과를 기록으로 남기면 협업이 유리합니다.","회의 전 메모 5줄이 결과를 바꿉니다.","새로운 도구를 시험해 볼 가치가 있습니다.","집중 시간대에 핵심 업무를 배치하세요."],money:["충동구매 대신 찜 목록으로 시간을 벌어보세요.","낡은 구독 하나를 정리할 때입니다.","작은 절약이 큰 선택의 자유를 만듭니다.","가격이 아닌 사용 빈도를 기준으로 판단하세요.","현금흐름 캘린더를 점검하면 마음이 가벼워집니다."],health:["수분 섭취와 가벼운 스트레칭으로 리듬을 되찾습니다.","저녁엔 화면 밝기를 낮춰 휴식을 준비하세요.","가벼운 산책이 생각을 정리해 줍니다.","허리를 곧게, 어깨의 긴장을 풀어주세요.","음식 기록이 컨디션의 힌트를 줍니다."],tips:["작게 시작하면 마음이 움직입니다.","오전에 중요한 연락을 먼저 시도하세요.","정리한 책상에서 좋은 아이디어가 나옵니다.","잠깐의 휴식이 긴 집중을 만듭니다.","감사의 한마디가 상황을 바꿉니다."],colors:[{hex:"#25D0A9",name:"터쿠아즈"},{hex:"#7C8CFF",name:"라벤더 블루"},{hex:"#FFB84D",name:"골든 옐로우"},{hex:"#FF6B6B",name:"코랄 핑크"},{hex:"#6B8CFF",name:"스카이 블루"},{hex:"#9B59B6",name:"퍼플"},{hex:"#2ECC71",name:"에메랄드 그린"},{hex:"#E67E22",name:"오렌지"},{hex:"#1ABC9C",name:"민트 그린"},{hex:"#F39C12",name:"앰버"},{hex:"#E84393",name:"로즈 핑크"},{hex:"#00BCD4",name:"아쿠아 블루"}]};const o=()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},n=(e,t)=>t[Math.floor(e()*t.length)],c=(e,t,o)=>Math.max(t,Math.min(o,e)),r="horoscope.daily.v1";function i(e){localStorage.setItem(r,JSON.stringify(e))}const a=document.getElementById("sign-grid"),s=document.getElementById("result-card"),d=document.getElementById("res-ico"),u=document.getElementById("res-title"),l=document.getElementById("res-period"),m=document.getElementById("res-date"),h=document.getElementById("res-meter"),f=document.getElementById("res-color-chip"),k=document.getElementById("res-color-text"),y=document.getElementById("res-number"),p=document.getElementById("res-love"),g=document.getElementById("res-work"),w=document.getElementById("res-money"),v=document.getElementById("res-health"),$=document.getElementById("res-tip"),x=document.getElementById("btn-reroll"),b=document.getElementById("btn-share"),M=document.getElementById("btn-copy-color");function C(r,i=0){const a=o(),s=function(e){let t=e>>>0;return function(){t+=1831565813;let e=Math.imul(t^t>>>15,1|t);return e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}}(function(e){let t=2166136261;for(let o=0;o<e.length;o++)t^=e.charCodeAt(o),t=Math.imul(t,16777619);return t>>>0}(a+"|"+r)+i),d=s(),u=d<.55?"pos":d<.85?"mid":"caut";let l=Math.floor(100*s());"pos"===u?l=c(l+15,52,98):"caut"===u&&(l=c(l-10,25,75));const m=l,h=n(s,t.love),f=n(s,t.work),k=n(s,t.money),y=n(s,t.health),p=n(s,t.tips),g=n(s,t.colors),w=1+Math.floor(9*s()),v=e.find(e=>e.key===r);return{date:a,signKey:r,signKo:v.ko,ico:v.ico,period:v.period,luck:m,colorHex:g.hex,colorName:g.name,number:w,love:h,work:f,money:k,health:y,tip:p}}function F(e){d.textContent=e.ico,u.textContent=e.signKo,l.textContent=e.period,m.textContent=e.date,h.style.setProperty("--deg",`${Math.round(e.luck/100*360)}deg`),h.setAttribute("data-val",e.luck),e.colorHex&&e.colorName?(f.style.background=e.colorHex,k.textContent=e.colorName):e.color&&(f.style.background=e.color,k.textContent=e.color),y.textContent=e.number,p.textContent=e.love,g.textContent=e.work,w.textContent=e.money,v.textContent=e.health,$.textContent=e.tip,s.hidden=!1}document.getElementById("year").textContent=(new Date).getFullYear();let B=null,D=0;async function S(){await async function(){try{const o="https://cdn.jsdelivr.net/gh/verylore/blog/dist/constellation/";let n="horoscope-data.json";try{const e=await fetch(o+"build-timestamp.txt");if(e.ok){const t=`build-${(await e.text()).trim()}.json`,c=await fetch(o+t);if(c.ok){const e=(await c.json()).manifest,t=await fetch(o+e);t.ok&&(n=(await t.json())["horoscope-data.json"]||n)}}}catch(e){}const c=await fetch(o+n);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const r=await c.json();return r.fortunes&&(t.love=r.fortunes.love||t.love,t.work=r.fortunes.career||t.work,t.money=r.fortunes.money||t.money,t.health=r.fortunes.health||t.health,t.tips=r.fortunes.general||t.tips),r.moods&&(t.moods=r.moods),r.adjectives&&(t.adjectives=r.adjectives),!0}catch(o){return!1}}(),a.innerHTML="",e.forEach(e=>{const t=document.createElement("button");t.className="card sign",t.setAttribute("aria-label",`${e.ko} 운세 보기`),t.innerHTML=`\n      <div class="ico" aria-hidden="true">${e.ico}</div>\n      <div class="nm">${e.ko}</div>\n      <div class="dt">${e.period}</div>\n    `,t.addEventListener("click",()=>function(e){D=0;const t=C(e,0);B=t,i({date:t.date,signKey:e,result:t}),F(t)}(e.key)),a.appendChild(t)});const n=function(){try{return JSON.parse(localStorage.getItem(r)||"null")}catch(e){return null}}(),c=o();n&&n.date===c&&n.result&&(B=n.result,F(n.result))}x.addEventListener("click",()=>{if(!B)return;D+=101;const e=C(B.signKey,D);B=e,i({date:e.date,signKey:B.signKey,result:e}),F(e)}),b.addEventListener("click",async()=>{if(!B)return;const e=B.colorName||B.color||"미정",t=`오늘의 ${B.signKo} 운세 (${B.date})\n총운 ${B.luck}점 · 럭키컬러 ${e} · 럭키넘버 ${B.number}\n한 줄 조언: ${B.tip}`;try{navigator.share?await navigator.share({title:"오늘의 별자리 운세",text:t}):(await navigator.clipboard.writeText(t),alert("공유 문구를 클립보드에 복사했습니다."))}catch(o){await navigator.clipboard.writeText(t),alert("공유 문구를 클립보드에 복사했습니다.")}}),M.addEventListener("click",async()=>{if(B)try{let e;e=B.colorName&&B.colorHex?`${B.colorName} (${B.colorHex})`:B.color?B.color:"럭키컬러 정보 없음",await navigator.clipboard.writeText(e),alert("럭키컬러가 복사되었습니다.")}catch(e){alert("복사 권한이 거부되어 럭키컬러를 선택해 직접 복사하세요.")}}),document.addEventListener("DOMContentLoaded",()=>{S()}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",S):S();
