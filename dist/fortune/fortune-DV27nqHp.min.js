const t="fortune_today",e=[{name:"ë¬¼ë³‘ìžë¦¬",emoji:"â™’",start:[1,20],end:[2,18]},{name:"ë¬¼ê³ ê¸°ìžë¦¬",emoji:"â™“",start:[2,19],end:[3,20]},{name:"ì–‘ìžë¦¬",emoji:"â™ˆ",start:[3,21],end:[4,19]},{name:"í™©ì†Œìžë¦¬",emoji:"â™‰",start:[4,20],end:[5,20]},{name:"ìŒë‘¥ì´ìžë¦¬",emoji:"â™Š",start:[5,21],end:[6,21]},{name:"ê²Œìžë¦¬",emoji:"â™‹",start:[6,22],end:[7,22]},{name:"ì‚¬ìžìžë¦¬",emoji:"â™Œ",start:[7,23],end:[8,22]},{name:"ì²˜ë…€ìžë¦¬",emoji:"â™",start:[8,23],end:[9,22]},{name:"ì²œì¹­ìžë¦¬",emoji:"â™Ž",start:[9,23],end:[10,22]},{name:"ì „ê°ˆìžë¦¬",emoji:"â™",start:[10,23],end:[11,22]},{name:"ì‚¬ìˆ˜ìžë¦¬",emoji:"â™",start:[11,23],end:[12,21]},{name:"ì—¼ì†Œìžë¦¬",emoji:"â™‘",start:[12,22],end:[1,19]}],n=[{name:"ì¥ë ",emoji:"ðŸ­",offset:0},{name:"ì†Œë ",emoji:"ðŸ®",offset:1},{name:"í˜¸ëž‘ì´ë ",emoji:"ðŸ¯",offset:2},{name:"í† ë¼ë ",emoji:"ðŸ°",offset:3},{name:"ìš©ë ",emoji:"ðŸ²",offset:4},{name:"ë±€ë ",emoji:"ðŸ",offset:5},{name:"ë§ë ",emoji:"ðŸ´",offset:6},{name:"ì–‘ë ",emoji:"ðŸ‘",offset:7},{name:"ì›ìˆ­ì´ë ",emoji:"ðŸµ",offset:8},{name:"ë‹­ë ",emoji:"ðŸ”",offset:9},{name:"ê°œë ",emoji:"ðŸ¶",offset:10},{name:"ë¼ì§€ë ",emoji:"ðŸ·",offset:11}];let o={overall:["ì˜¤ëŠ˜ì€ ì „ë°˜ì ìœ¼ë¡œ ê· í˜•ìž¡ížŒ í•˜ë£¨ê°€ ë  ê²ƒìž…ë‹ˆë‹¤.","ìƒˆë¡œìš´ ê¸°íšŒì™€ ë„ì „ì´ ì°¾ì•„ì˜¬ ìˆ˜ ìžˆëŠ” ë‚ ìž…ë‹ˆë‹¤.","ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ íë¥´ëŠ” íŠ¹ë³„í•œ í•˜ë£¨ì˜ˆìš”.","ì•ˆì •ì ì´ë©´ì„œë„ í™œë ¥ì´ ë„˜ì¹˜ëŠ” ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."],love:["ìƒˆë¡œìš´ ë§Œë‚¨ì´ ë‹¹ì‹ ì„ ê¸°ë‹¤ë¦¬ê³  ìžˆìŠµë‹ˆë‹¤.","ì—°ì¸ê³¼ì˜ ê´€ê³„ê°€ í•œì¸µ ë” ê¹Šì–´ì§ˆ ê²ƒìž…ë‹ˆë‹¤.","ê³¼ê±°ì˜ ì¸ì—°ì´ ë‹¤ì‹œ ì°¾ì•„ì˜¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.","ì§„ì‹¤í•œ ì‚¬ëž‘ì„ ë°œê²¬í•˜ê²Œ ë  ë‚ ìž…ë‹ˆë‹¤."],money:["ì˜ˆìƒì¹˜ ëª»í•œ ìˆ˜ìž…ì´ ìƒê¸¸ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.","íˆ¬ìžì— ëŒ€í•œ ì¢‹ì€ ì†Œì‹ì´ ìžˆì„ ê²ƒìž…ë‹ˆë‹¤.","ì ˆì•½í•˜ëŠ” ìŠµê´€ì´ í° ë„ì›€ì´ ë  ê²ƒìž…ë‹ˆë‹¤.","ê¸ˆì „ ê´€ë¦¬ì— ì‹ ì¤‘í•¨ì´ í•„ìš”í•œ ì‹œê¸°ìž…ë‹ˆë‹¤."],work:["ì—…ë¬´ì—ì„œ ì¢‹ì€ ì„±ê³¼ë¥¼ ê±°ë‘˜ ìˆ˜ ìžˆëŠ” ë‚ ìž…ë‹ˆë‹¤.","ìƒˆë¡œìš´ ê¸°íšŒê°€ ë‹¹ì‹  ì•žì— íŽ¼ì³ì§ˆ ê²ƒìž…ë‹ˆë‹¤.","ë™ë£Œë“¤ê³¼ì˜ í˜‘ë ¥ì´ í° íž˜ì´ ë  ê²ƒìž…ë‹ˆë‹¤.","ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ëŠ” í•˜ë£¨ìž…ë‹ˆë‹¤."],study:["í•™ìŠµ ëŠ¥ë ¥ì´ í–¥ìƒë˜ëŠ” ì‹œê¸°ìž…ë‹ˆë‹¤.","ìƒˆë¡œìš´ ì§€ì‹ì„ í¡ìˆ˜í•˜ê¸° ì¢‹ì€ ë‚ ì´ì—ìš”.","ì§‘ì¤‘ë ¥ì´ ë†’ì•„ì ¸ íš¨ìœ¨ì ì¸ ê³µë¶€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.","ì„±ì  í–¥ìƒì˜ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìžˆì–´ìš”."],health:["í™œë ¥ì´ ë„˜ì¹˜ëŠ” í•˜ë£¨ê°€ ë  ê²ƒìž…ë‹ˆë‹¤.","ê·œì¹™ì ì¸ ìš´ë™ì´ í° ë„ì›€ì´ ë  ê²ƒìž…ë‹ˆë‹¤.","ì¶©ë¶„í•œ íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.","ê±´ê°•í•œ ì‹ìŠµê´€ì„ ìœ ì§€í•˜ì„¸ìš”."],tips:["ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ì´ í–‰ìš´ì„ ë¶ˆëŸ¬ì˜¬ ê²ƒìž…ë‹ˆë‹¤.","ì£¼ë³€ ì‚¬ëžŒë“¤ì—ê²Œ ê°ì‚¬í•œ ë§ˆìŒì„ í‘œí˜„í•´ë³´ì„¸ìš”.","ìƒˆë¡œìš´ ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš”.","ì§ê°ì„ ë¯¿ê³  í–‰ë™í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤."],moods:["í™œë°œí•¨","ì°¨ë¶„í•¨","ì—´ì •ì ","ì‹ ì¤‘í•¨","ìœ ì¾Œí•¨","ì§‘ì¤‘ë ¥","ì°½ì˜ì ","ì•ˆì •ê°"],adjectives:["ë¹›ë‚˜ëŠ”","í–‰ë³µí•œ","í‰í™”ë¡œìš´","ì—­ë™ì ì¸","ë”°ëœ»í•œ","ë©‹ì§„","íŠ¹ë³„í•œ","í™”ë ¤í•œ"]};const a={dawn:{name:"ìƒˆë²½",boost:"health",desc:"ìƒˆë¡œìš´ ì‹œìž‘"},morning:{name:"ì˜¤ì „",boost:"work",desc:"í™œë™ì  ì—ë„ˆì§€"},noon:{name:"ì •ì˜¤",boost:"money",desc:"í’ìš”ë¡œìš´ ê¸°ìš´"},afternoon:{name:"ì˜¤í›„",boost:"love",desc:"ë”°ëœ»í•œ ê°ì •"},evening:{name:"ì €ë…",boost:"study",desc:"í•™ìŠµê³¼ ì„±ì°°"},night:{name:"ë°¤",boost:"overall",desc:"ë‚´ë©´ì˜ ì§€í˜œ"}},c={male:{overall:1,love:1,money:1.05,work:1.1,study:1.05,health:1},female:{overall:1,love:1.1,money:1,work:1,study:1,health:1.05}},r={solar:{multiplier:1,desc:"ì„œêµ¬ì‹ ì—ë„ˆì§€"},lunar:{multiplier:1.05,desc:"ì „í†µ ìš´ì„¸ë ¥"},"lunar-leap":{multiplier:1.1,desc:"íŠ¹ë³„í•œ ìš´ëª…ë ¥"}};function i(t){const e=1e4*Math.sin(t);return e-Math.floor(e)}function s(t,e){return t[Math.floor(i(e)*t.length)]}function m(){try{return JSON.parse(localStorage.getItem(t)||"null")}catch(e){return null}}const d=document.getElementById("header-title");document.getElementById("input-section");const u=document.getElementById("result-card");document.querySelectorAll('input[name="gender"]'),document.querySelectorAll('input[name="calendar"]');const l=document.getElementById("birth-year"),f=document.getElementById("birth-month"),h=document.getElementById("birth-day"),w=document.getElementById("birth-hour"),v=document.getElementById("birth-minute"),y=document.getElementById("check-fortune-btn"),j=document.getElementById("res-ico"),b=document.getElementById("res-title"),$=document.getElementById("res-info"),p=document.getElementById("res-date"),M=document.getElementById("res-meter"),g=document.getElementById("res-overall"),k=document.getElementById("res-love"),D=document.getElementById("res-money"),I=document.getElementById("res-work"),T=document.getElementById("res-study"),S=document.getElementById("res-health"),z=document.getElementById("zodiac-emoji"),O=document.getElementById("zodiac-name"),x=document.getElementById("chinese-zodiac-emoji"),H=document.getElementById("chinese-zodiac-name"),J=document.querySelectorAll(".tab-btn"),K=document.querySelectorAll(".tab-pane");J.forEach(t=>{t.addEventListener("click",t=>{!function(t){J.forEach(t=>t.classList.remove("active")),K.forEach(t=>t.classList.remove("active"));const e=document.querySelector(`.tab-btn[data-tab="${t}"]`),n=document.getElementById(`tab-${t}`);e&&n&&(e.classList.add("active"),n.classList.add("active"))}(t.currentTarget.getAttribute("data-tab"))})});const N=document.getElementById("btn-share"),R=document.getElementById("year");function B(){const t=parseInt(l.value),e=parseInt(f.value);if(!t||!e)return;const n=new Date(t,e,0).getDate(),o=parseInt(h.value);for(;h.children.length>1;)h.removeChild(h.lastChild);for(let a=1;a<=n;a++){const t=document.createElement("option");t.value=a,t.textContent=`${a}ì¼`,h.appendChild(t)}o&&o<=n&&(h.value=o)}async function C(){const e={gender:(null==(n=document.querySelector('input[name="gender"]:checked'))?void 0:n.value)||"male",calendar:(null==(d=document.querySelector('input[name="calendar"]:checked'))?void 0:d.value)||"solar",birthYear:l.value,birthMonth:f.value,birthDay:h.value,birthHour:w.value,birthMinute:v.value};var n,d;if(!function(t){return t.birthYear&&t.birthMonth&&t.birthDay}(e))return void alert("ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ìž…ë ¥í•´ì£¼ì„¸ìš”.");const u=(new Date).toISOString().split("T")[0],j=m();if(j&&j.date===u&&j.userInfo.gender===e.gender&&j.userInfo.calendar===e.calendar&&j.userInfo.birthYear===e.birthYear&&j.userInfo.birthMonth===e.birthMonth&&j.userInfo.birthDay===e.birthDay&&j.userInfo.birthHour===e.birthHour&&j.userInfo.birthMinute===e.birthMinute)E(j);else{y.disabled=!0,y.textContent="ðŸ”® ìš´ì„¸ í™•ì¸ ì¤‘...";try{await async function(){try{const e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"./":"https://cdn.jsdelivr.net/gh/verylore/blog/dist/fortune/";let n="fortune-data.json";try{const t=await fetch(e+"build-timestamp.txt");if(t.ok){const o=`build-${(await t.text()).trim()}.json`,a=await fetch(e+o);if(a.ok){const t=(await a.json()).manifest,o=await fetch(e+t);o.ok&&(n=(await o.json())["fortune-data.json"]||n)}}}catch(t){}const a=await fetch(e+n);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const c=await a.json();return c.fortunes&&(o.overall=c.fortunes.overall||o.overall,o.love=c.fortunes.love||o.love,o.money=c.fortunes.money||o.money,o.work=c.fortunes.work||o.work,o.study=c.fortunes.study||o.study,o.health=c.fortunes.health||o.health,o.tips=c.fortunes.general||o.tips),c.moods&&(o.moods=c.moods),c.adjectives&&(o.adjectives=c.adjectives),!0}catch(e){return!1}}();const n=function(t){const e=(new Date).toISOString().split("T")[0],n=function(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return Math.abs(e)}(`${t.gender}-${t.calendar}-${t.birthYear}-${t.birthMonth}-${t.birthDay}-${t.birthHour||"unknown"}-${e}`),m=(d=n,Math.floor(66*i(d))+30);var d;const u=c[t.gender]||c.male,l=r[t.calendar]||r.solar;let f=null;if(""!==t.birthHour){const e=(h=parseInt(t.birthHour))>=5&&h<9?"dawn":h>=9&&h<12?"morning":h>=12&&h<14?"noon":h>=14&&h<18?"afternoon":h>=18&&h<22?"evening":"night";f=a[e]}var h;const w=parseInt(t.birthYear)%10%4,v={overall:Math.min(95,Math.round(m*u.overall*l.multiplier+w)),love:Math.min(95,Math.round(m*u.love*l.multiplier+w)),money:Math.min(95,Math.round(m*u.money*l.multiplier+w)),work:Math.min(95,Math.round(m*u.work*l.multiplier+w)),study:Math.min(95,Math.round(m*u.study*l.multiplier+w)),health:Math.min(95,Math.round(m*u.health*l.multiplier+w))};return f&&v[f.boost]&&(v[f.boost]=Math.min(95,v[f.boost]+5)),{userInfo:t,totalScore:Math.round((v.overall+v.love+v.money+v.work+v.study+v.health)/6),scores:v,fortunes:{overall:s(o.overall,n+1),love:s(o.love,n+2),money:s(o.money,n+3),work:s(o.work,n+4),study:s(o.study,n+5),health:s(o.health,n+6),tip:s(o.tips,n+7)},mood:s(o.moods,n+10),adjective:s(o.adjectives,n+11),timeBoost:f,calendarInfo:l,date:e}}(e);E(n),function(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){}}(n)}catch(b){alert("ìš´ì„¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{y.disabled=!1,y.textContent="ðŸ”® ë‚´ ìš´ì„¸ í™•ì¸í•˜ê¸°"}}}function E(t){u.hidden=!1,u.style.animation="none",setTimeout(()=>{u.style.animation="slideInUp 0.6s ease-out"},10),j.textContent="ðŸ”®";const o="male"===t.userInfo.gender?"ë‚¨ì„±":"ì—¬ì„±",a={solar:"ì–‘ë ¥",lunar:"ìŒë ¥(í‰ë‹¬)","lunar-leap":"ìŒë ¥(ìœ¤ë‹¬)"}[t.userInfo.calendar]||"ì–‘ë ¥";b.textContent=`${o} â€¢ ${t.userInfo.birthYear}ë…„ ${t.userInfo.birthMonth}ì›” ${t.userInfo.birthDay}ì¼`,$.textContent=`${a} â€¢ ${t.calendarInfo.desc}`,p.textContent=(new Date).toLocaleDateString("ko-KR");const c=Math.round(t.totalScore/100*360);M.style.setProperty("--deg",`${c}deg`),M.setAttribute("data-val",t.totalScore),g.textContent=t.fortunes.overall,k.textContent=t.fortunes.love,D.textContent=t.fortunes.money,I.textContent=t.fortunes.work,T.textContent=t.fortunes.study,S.textContent=t.fortunes.health;const r=function(t,n){for(const o of e){const[e,a]=o.start,[c,r]=o.end;if("ì—¼ì†Œìžë¦¬"===o.name){if(12===t&&n>=a||1===t&&n<=r)return o}else{if(t===e&&n>=a)return o;if(t===c&&n<=r)return o}}return e[0]}(t.userInfo.birthMonth,t.userInfo.birthDay),i=(s=t.userInfo.birthYear,n[(s-1900)%12]);var s;z.textContent=r.emoji,O.textContent=r.name,x.textContent=i.emoji,H.textContent=i.name,t.timeBoost&&($.textContent+=` â€¢ ${t.timeBoost.name} ${t.timeBoost.desc}`),u.scrollIntoView({behavior:"smooth"})}async function L(){const t={title:"ì˜¤ëŠ˜ì˜ ìš´ì„¸",text:`${b.textContent}ì˜ ì˜¤ëŠ˜ ìš´ì„¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!`,url:window.location.href};try{navigator.share?await navigator.share(t):(await navigator.clipboard.writeText(window.location.href),alert("ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"))}catch(e){}}document.addEventListener("DOMContentLoaded",function(){R.textContent=(new Date).getFullYear(),function(){const t=(new Date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"});d.textContent=`${t} ì˜¤ëŠ˜ì˜ ìš´ì„¸`}(),function(){for(let t=(new Date).getFullYear()-15;t>=1950;t--){const e=document.createElement("option");e.value=t,e.textContent=`${t}ë…„`,l.appendChild(e)}for(let t=1;t<=12;t++){const e=document.createElement("option");e.value=t,e.textContent=`${t}ì›”`,f.appendChild(e)}for(let t=1;t<=31;t++){const e=document.createElement("option");e.value=t,e.textContent=`${t}ì¼`,h.appendChild(e)}for(let t=0;t<24;t++){const e=document.createElement("option");e.value=t,e.textContent=`${t.toString().padStart(2,"0")}ì‹œ`,w.appendChild(e)}for(let t=0;t<60;t+=5){const e=document.createElement("option");e.value=t,e.textContent=`${t.toString().padStart(2,"0")}ë¶„`,v.appendChild(e)}}(),y.addEventListener("click",C),N.addEventListener("click",L),f.addEventListener("change",B),l.addEventListener("change",B);const t=m();t&&t.date===(new Date).toISOString().split("T")[0]&&E(t)});
